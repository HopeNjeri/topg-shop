---
id: kgct8t7d
title: Brands App view
file_version: 1.1.3
app_version: 1.18.17
---

This code defines a function called `catalogue` that handles a request to display a catalogue of shop brands. It retrieves all brands from the database, orders them in descending order based on whether they are in stock and the time they were added.

If the user making the request is authenticated, it retrieves the customer from the request and creates or gets an existing incomplete order for that customer. Finally, it renders the `catalogue.html` template with the retrieved brands and the order as context variables.

If the user is not authenticated, it renders the `catalogue.html` template with only the retrieved brands as the context variable.
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ the_shop/brands/views.py
```python
7      def catalogue(request):
8          shop_brands = Brand.objects.all().order_by('-brand_in_stock', '-time')
9          if request.user.is_authenticated:
10             customer = request.user
11             order, created = Order.objects.get_or_create(user=customer, complete=False)
12             return render(request, 'catalogue.html', {"shop_brands": shop_brands, "order": order})
13         return render(request, 'catalogue.html', {"shop_brands": shop_brands})
14     
```

<br/>

This code snippet retrieves a brand called "Jordans" from the database and then filters the products of that brand. It then checks if the user is authenticated, and if so, it creates or retrieves an incomplete order for that user. Finally, it renders a template called "jordans.html" with the filtered products and the order (if applicable).
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ the_shop/brands/views.py
```python
16     def jordans(request):
17         jordan_brand = get_object_or_404(Brand, brand_name='Jordans')
18         jordan_shoes = Product.objects.filter(brand=jordan_brand).order_by('-shoe_in_stock', '-shoe_time_added')
19         # size = Size.objects.all().order_by('-time_added')
20         if request.user.is_authenticated:
21             customer = request.user
22             order, created = Order.objects.get_or_create(user=customer, complete=False)
23             return render(request, 'jordans.html', {
24                 "jordan_shoes": jordan_shoes,
25                 "order": order,
26             })
27         return render(request, 'jordans.html', {
28             "jordan_shoes": jordan_shoes,
29         })
30     
```

<br/>

This code snippet retrieves all Nike shoes from the database, orders them by availability and time of addition, and renders them on the 'nikes.html' template. If the user is authenticated, it also creates or retrieves an incomplete order associated with the customer.
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ the_shop/brands/views.py
```python
32     def nikes(request):
33         nike_brand = get_object_or_404(Brand, brand_name='Nikes')
34         nike_shoes = Product.objects.filter(brand=nike_brand).order_by('-shoe_in_stock', '-shoe_time_added')
35         if request.user.is_authenticated:
36             customer = request.user
37             order, created = Order.objects.get_or_create(user=customer, complete=False)
38             return render(request, 'nikes.html', {"nike_shoes": nike_shoes, "order": order})
39         return render(request, 'nikes.html', {"nike_shoes": nike_shoes})
```

<br/>

This happens to all of the endpoints below under brands/view

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBdG9wZy1zaG9wJTNBJTNBemViYnlH/docs/kgct8t7d).
